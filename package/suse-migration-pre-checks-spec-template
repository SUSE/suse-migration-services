#
# spec file for package suse-migration-pre-checks
#
# Copyright (c) 2022 SUSE LINUX GmbH, Nuernberg, Germany.
#
# All modifications and additions to the file contributed by third parties
# remain the property of their copyright owners, unless otherwise agreed
# upon. The license for this file, and modifications and additions to the
# file, is the same license as for the pristine package itself (unless the
# license for the pristine package is not an Open Source License, in which
# case the license is the MIT License). An "Open Source License" is a
# license that conforms to the Open Source Definition (Version 1.9)
# published by the Open Source Initiative.

# Please submit bugfixes or comments via http://bugs.opensuse.org/
#
%global           MinSLEVersion 12.3

Name:             suse-migration-pre-checks
Version:          %%VERSION
Release:          0
Url:              https://github.com/SUSE/suse-migration-services
Summary:          SUSE Distribution SLE15 Migration Pre-Checks
License:          GPL-3.0+
Group:            System/Management
Source:           suse-migration-pre-checks.tar.gz
BuildRoot:        %{_tmppath}/%{name}-%{version}-build
BuildArch:        noarch
BuildRequires:    python3-devel
BuildRequires:    python3-setuptools
BuildRequires:    python3-Cerberus
BuildRequires:    python3-PyYAML
Requires:         python3-Cerberus
Requires:         python3-PyYAML
Requires:         python3-setuptools
Requires:         product(SLES) >= %{MinSLEVersion}

%description -n suse-migration-pre-checks
Script code to run the SLE migration pre-checks

%prep
%setup -q -n suse_migration_services-%{version}

%build
python3 setup.py build

%install
python3 setup.py install --prefix=%{_prefix} --root=%{buildroot}

mv %{buildroot}/%{_bindir}/suse-migration-pre-checks /tmp/
rm %{buildroot}/%{_bindir}/*
mv /tmp/suse-migration-pre-checks %{buildroot}/%{_bindir}/

%files
%defattr(-,root,root,-)
%{python3_sitelib}/*
%{_bindir}/suse-migration-pre-checks

%changelog
